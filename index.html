<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento via PIX</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        #qr-code { margin: 20px auto; }
        #nota-fiscal { display: none; border: 1px solid #000; padding: 10px; margin-top: 20px; }
    </style>
</head>
<body>

    <h2>Pagamento via PIX</h2>
    
    <label>Nome do Cliente:</label>
    <input type="text" id="cliente" placeholder="Nome Completo"><br><br>

    <label>CPF/CNPJ:</label>
    <input type="text" id="cpf" placeholder="000.000.000-00"><br><br>

    <label>Valor (R$):</label>
    <input type="number" id="valor" placeholder="0.00"><br><br>

    <button onclick="gerarQRCode()">Gerar QR Code PIX</button>

    <canvas id="qr-code"></canvas>

    <div id="nota-fiscal">
        <h3>Nota Fiscal</h3>
        <p><strong>Cliente:</strong> <span id="nf-cliente"></span></p>
        <p><strong>CPF/CNPJ:</strong> <span id="nf-cpf"></span></p>
        <p><strong>Valor:</strong> R$ <span id="nf-valor"></span></p>
        <p><strong>Data:</strong> <span id="nf-data"></span></p>
        <p><strong>Hora:</strong> <span id="nf-hora"></span></p>
        <button onclick="baixarNotaFiscal()">Baixar Nota Fiscal</button>
    </div>

    <script>
        function gerarQRCode() {
            const cliente = document.getElementById("cliente").value;
            const cpf = document.getElementById("cpf").value;
            const valor = document.getElementById("valor").value;
            if (!cliente || !cpf || !valor) {
                alert("Preencha todos os campos!");
                return;
            }

            // Gerando código PIX (Exemplo: Chave Pix fixa + valor + descrição)
            const chavePix = "SEU-EMAIL@DOMINIO.COM"; // Substitua pela sua chave PIX
            const urlPix = `pix://00020126330014BR.GOV.BCB.PIX0114${chavePix}520400005303986540${valor}5802BR5925Nome da Agência6008BRASIL62070503***`;

            // Criando QR Code
            const qr = new QRious({ element: document.getElementById("qr-code"), value: urlPix, size: 200 });

            // Simular pagamento após 5 segundos
            setTimeout(() => {
                gerarNotaFiscal(cliente, cpf, valor);
            }, 5000);
        }

        function gerarNotaFiscal(cliente, cpf, valor) {
            const dataAtual = new Date();
            document.getElementById("nf-cliente").textContent = cliente;
            document.getElementById("nf-cpf").textContent = cpf;
            document.getElementById("nf-valor").textContent = valor;
            document.getElementById("nf-data").textContent = dataAtual.toLocaleDateString();
            document.getElementById("nf-hora").textContent = dataAtual.toLocaleTimeString();
            document.getElementById("nota-fiscal").style.display = "block";
        }

        function baixarNotaFiscal() {
            const cliente = document.getElementById("nf-cliente").textContent;
            const cpf = document.getElementById("nf-cpf").textContent;
            const valor = document.getElementById("nf-valor").textContent;
            const data = document.getElementById("nf-data").textContent;
            const hora = document.getElementById("nf-hora").textContent;

            const notaFiscalTexto = `
                Nota Fiscal\n
                -------------------------\n
                Cliente: ${cliente}\n
                CPF/CNPJ: ${cpf}\n
                Valor: R$ ${valor}\n
                Data: ${data}\n
                Hora: ${hora}\n
                -------------------------\n
                Obrigado por seu pagamento!
            `;

            const blob = new Blob([notaFiscalTexto], { type: "text/plain" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = "Nota_Fiscal.txt";
            link.click();
        }
    </script>

</body>
</html>
